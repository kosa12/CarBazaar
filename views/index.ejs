<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>CarBazaar</title>
    <link rel="stylesheet" href="/output.css" />
  </head>
  <body class="bg-background font-Courier">
    <%- include('partials/header.ejs', {user: user}) %>

    <div class="container mx-auto px-4">
      <div class="welcome-text mt-16 pt-12 text-3xl">
        <h1>Welcome to <span class="name-h text-navbarborder font-extrabold">CarBazaar</span>...</h1>
        <p>Find the best deals on cars in your city!</p>
      </div>

      <a name="search"></a>
      <br />

      <div class="title mt-20 mb-4 text-2xl font-semibold text-center">Search Advertisements:</div>
      <%- include('partials/homesearch.ejs') %>
      <a name="advertisementsListO"></a>
      <br />

      <div class="title mt-20 mb-4 text-2xl font-semibold text-center">Advertisement List:</div>

      <div id="advertisementsList" class="flex flex-wrap justify-center gap-6 p-6 bg-transparent">
        <% advertisements.forEach(ad => { %>
        <div
          class="advertisement advertisement w-full sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 p-4 bg-white border border-gray-300 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-300"
        >
          <div class="relative overflow-hidden h-48">
            <% if (ad.imageUrl) { %>
            <img class="object-cover w-full h-full" src="<%= ad.imageUrl %>" alt="<%= ad.brand %>" />
            <% } else { %>
            <img class="object-cover w-full h-full" src="/icons/car.png" alt="<%= ad.brand %>" />
            <% } %>
          </div>
          <div class="text-center mt-8">
            <h3 class="text-2xl font-extrabold text-purple-900"><%= ad.brand %></h3>
            <p class="text-xl font-bold text-orange-500">Price: $<%= ad.price %></p>
            <p class="text-xl font-bold text-purple-900">City: <%= ad.city %></p>
            <div class="mt-4">
              <a
                href="/advertisement/<%= ad.id %>"
                class="block bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md"
                >View Full Details</a
              >
              <button
                data-id="<%= ad.id %>"
                class="view-details mt-2 block bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded-md"
              >
                View More Info
              </button>
              <div class="extra-details" id="details-<%=ad.id%>"></div>
            </div>
          </div>
        </div>
        <% }); %>
      </div>

      <% if (user) { %> <%- include('partials/add_ads.ejs') %> <% } %>
    </div>

    <a name="add"></a>
    <%- include('partials/footer.ejs') %>

    <script src="/js/ajax_details.js" defer></script>
    <script src="/js/dropdownuser.js" async></script>
  </body>
</html>
